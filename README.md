# OllamaChat - AI Chat Application

A modern, full-stack AI chat application built with Next.js and Ollama, featuring real-time streaming responses, persistent chat management, and a professional dark-themed interface.

## ✨ Features

- **Real-time AI Chat** - Streaming responses from Ollama AI models
- **Chat Management** - Create, rename, delete, and navigate between conversations
- **Professional UI** - Custom dark theme with ChatGPT-like centered layout
- **Keyboard Shortcuts** - Enter to send, Escape to stop streaming
- **Dynamic Controls** - Send button transforms to Stop button during streaming
- **Persistent Storage** - All chats saved to PostgreSQL database
- **Auto-generated Titles** - Smart chat naming based on conversation content
- **Custom Modals** - Professional rename/delete dialogs
- **Responsive Design** - Works seamlessly across all screen sizes

## 🚀 Quick Start

### Prerequisites

- Node.js (v16 or higher)
- PostgreSQL database
- Ollama installed and running locally

### Installation

1. **Clone the repository**

   git clone https://github.com/ImAmyth-II/OllamaChat.git

   cd OllamaChat

2. **Database Setup**
   - Create a PostgreSQL database named `chatapp_db`
   - The application will connect using: `postgres://postgres:postp@ss@localhost:5432/chatapp_db`

3. **Start Ollama Service**
ollama serve
ollama pull gemma3:1b # The model used in your application

4. **Install and Start Backend**
cd backend
npm install
npm start

*Note: The backend runs on **port 3001** and uses nodemon to watch for changes*

5. **Install and Start Frontend**
cd frontend
npm install
npm run dev

*Note: The frontend runs on **port 3000***

6. **Open Application**
   - Navigate to `http://localhost:3000`
   - Start chatting with your AI assistant!

## 📁 Project Structure

```
OllamaChat/
├── backend/
│   ├── server.js          # Express server with API endpoints
│   ├── db.js              # PostgreSQL database configuration
│   ├── models/            # Sequelize database models directory
│   │   ├── Chat.js        # Chat model
│   │   └── Message.js     # Message model
│   └── package.json       # Backend dependencies
│
├── frontend/
│   ├── app/
│   │   ├── favicon.ico    # Custom Ollama favicon, Replace the favicon generated by Next.js with this one
│   │   ├── layout.js      # Root layout with "OllamaChat" title
│   │   ├── page.js        # Main chat application component
│   │   └── globals.css    # Global styles
│   ├── lib/
│   │   └── api.js         # API client functions
│   └── package.json       # Frontend dependencies
│
└── README.md              # This file
```

## 🔧 Configuration Details

### Port Configuration

- **Backend Server**: Runs on **port 3001** (configured in server.js)
- **Frontend Application**: Runs on **port 3000** (localhost)
- **Ollama API**: `http://127.0.0.1:11434/api/generate` (instead of localhost)

### Database Configuration

Set up database as `chatapp_db`. The application connects using:

// backend/db.js
```
const sequelize = new Sequelize(
"postgres://postgres:postp@ss@localhost:5432/chatapp_db",
{
logging: false,
dialect: "postgres",
}
);
```

### Ollama Model Configuration

// backend/server.js
```
const ollamaResponse = await fetch(
"http://127.0.0.1:11434/api/generate",
{
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify({
model: "gemma3:1b", // Configured model
prompt: content,
stream: true,
}),
}
);
```

### API Configuration

// frontend/lib/api.js
```
const API_BASE_URL = "http://localhost:3001/api";
```

## 🛠️ Development Scripts

### Start the Backend:
cd backend
npm install
npm start

*Runs script: `nodemon server.js`*

### Start Frontend:
cd frontend
npm install
npm run dev

## 🎨 Customization

### Color Scheme

The application uses a custom dark theme with the following color palette:

- **Chat Header**: `#1f2020`
- **Messages Area**: `#181b1a`
- **Input Field**: `#181b1a`
- **Sidebar Border**: `#525252`
- **Hover Effects**: `#272a2a`

### Styling

All custom colors are applied using inline styles for precise control:

style={{ backgroundColor: '#1f2020' }}
style={{ borderColor: '#525252' }}

## 🔌 API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/chat` | Create new chat |
| GET | `/api/chats` | Get all chats |
| GET | `/api/chat/:chatId` | Get chat messages |
| POST | `/api/chat/:chatId/message` | Send message (streaming) |
| POST | `/api/chat/:chatId/stop` | Stop streaming response |
| PUT | `/api/chat/:chatId` | Rename chat |
| DELETE | `/api/chat/:chatId` | Delete chat |

## ⚡ Performance Features

- **Streaming Responses** - Real-time AI response display
- **Database Indexing** - Optimized queries for chat retrieval
- **State Management** - Efficient React state handling
- **Memory Management** - Proper cleanup of streaming connections
- **Error Handling** - Robust error recovery throughout the application

## 🎯 Usage

### Basic Chat Operations

1. **Start New Chat** - Click "New Chat" button
2. **Send Message** - Type and press Enter or click Send
3. **Stop Response** - Press Escape or click Stop button
4. **Switch Chats** - Click on any chat in the sidebar

### Chat Management

1. **Rename Chat** - Hover over chat → click ✏️ → enter new title
2. **Delete Chat** - Hover over chat → click 🗑️ → confirm deletion
3. **View Chat History** - All conversations automatically saved

### Keyboard Shortcuts

- **Enter** - Send message
- **Escape** - Stop streaming response
- **Enter** (in rename modal) - Confirm rename
- **Escape** (in modals) - Cancel operation

## 🔍 Troubleshooting

### Common Issues

**Backend Won't Start**
- Ensure PostgreSQL is running with database `chatapp_db`
- Check if port 3001 is available
- Verify Ollama is running on `http://127.0.0.1:11434`

**Frontend Can't Connect**
- Ensure backend is running on port 3001
- Check API base URL matches backend port
- Verify CORS settings allow localhost:3000

**Ollama Connection Issues**
- Start Ollama service: `ollama serve`
- Verify model exists: `ollama list`
- Check Ollama is accessible at `127.0.0.1:11434`

**Database Connection Failed**
- Verify PostgreSQL is running
- Check connection string in `backend/db.js`
- Ensure database `chatapp_db` exists

## 📦 Dependencies

### Backend
- **express** - Web framework
- **cors** - Cross-origin resource sharing
- **sequelize** - PostgreSQL ORM
- **pg** - PostgreSQL client

### Frontend
- **next** - React framework
- **react** - UI library
- **react-markdown** - Markdown rendering
- **tailwindcss** - Utility-first CSS

## 🚀 Deployment

For production deployment:

1. **Backend**: Deploy to your preferred hosting service (Railway, Heroku, DigitalOcean)
2. **Database**: Use managed PostgreSQL (AWS RDS, Railway, Supabase)
3. **Frontend**: Deploy to Vercel, Netlify, or similar
4. **Ollama**: Set up on a server with GPU support for optimal performance

## 📄 License

This project is open source. Feel free to use, modify, and distribute according to your needs.

**Built with ❤️ using Next.js, Express, TailwindCSS, PostgreSQL, and Ollama**
